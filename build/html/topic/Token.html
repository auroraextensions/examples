
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Token &#8212; Whiteboard 1.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/styles.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#token" id="id3">Token</a></p></li>
<li><p><a class="reference internal" href="#description" id="id4">Description</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id5">Usage</a></p></li>
<li><p><a class="reference internal" href="#source" id="id6">Source</a></p></li>
<li><p><a class="reference internal" href="#notes" id="id7">Notes</a></p></li>
</ul>
</div>
<div class="section" id="token">
<h1><a class="toc-backref" href="#id3">Token</a><a class="headerlink" href="#token" title="Permalink to this headline">¶</a></h1>
<p><em>Published</em>: 2019-08-21</p>
</div>
<div class="section" id="description">
<h1><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h1>
<p>Magento provides the <code class="docutils literal notranslate"><span class="pre">Magento\Framework\Math\Random</span></code> <a class="footnote-reference brackets" href="#ref1" id="id1">1</a> class for
generating random data. This class is particularly useful when you need things
like tokens, nonces, and salts, and is used in several areas of the framework.
However, we’d prefer to have an entirely static class that provides the same
functionality, which we can do with PHP builtins.</p>
<p>In the example below, the <code class="docutils literal notranslate"><span class="pre">Token</span></code> class provides two <code class="docutils literal notranslate"><span class="pre">static</span></code> methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">generate</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isHex</span></code></p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">generate</span></code> method utilizes <cite>random_bytes</cite> <a class="footnote-reference brackets" href="#ref2" id="id2">2</a> for random sequence
generation, and the <code class="docutils literal notranslate"><span class="pre">isHex</span></code> method verifies the given sequence contains only
hexidecimal characters.</p>
</div>
<div class="section" id="usage">
<h1><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">...</span>
<span class="x">/** @var string $token */</span>
<span class="x">$token = Token::generate();</span>
<span class="x">...</span>
</pre></div>
</div>
</div>
<div class="section" id="source">
<h1><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h1>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="sd">/**</span>
<span class="sd"> * Token.php</span>
<span class="sd"> */</span>
<span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>

<span class="k">namespace</span> <span class="nx">Vendor\Package\Model\Security</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Token</span>
<span class="p">{</span>
    <span class="sd">/** @constant string REGEX */</span>
    <span class="k">public</span> <span class="k">const</span> <span class="no">REGEX</span> <span class="o">=</span> <span class="s1">&#39;/[^a-f0-9]/&#39;</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * @param int $length</span>
<span class="sd">     * @return string</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">generate</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$length</span> <span class="o">=</span> <span class="mi">32</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">bin2hex</span><span class="p">(</span><span class="nx">random_bytes</span><span class="p">(</span><span class="nv">$length</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * @param string $token</span>
<span class="sd">     * @return bool</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">isHex</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$token</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span>
    <span class="p">{</span>
      <span class="k">return</span> <span class="o">!</span><span class="nb">preg_match</span><span class="p">(</span><span class="nx">self</span><span class="o">::</span><span class="na">REGEX</span><span class="p">,</span> <span class="nv">$token</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="notes">
<h1><a class="toc-backref" href="#id7">Notes</a><a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h1>
<dl class="footnote brackets">
<dt class="label" id="ref1"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><a class="reference external" href="https://github.com/magento/magento2/blob/2.3/lib/internal/Magento/Framework/Math/Random.php">MagentoFrameworkMathRandom</a></p>
</dd>
<dt class="label" id="ref2"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p><a class="reference external" href="https://www.php.net/manual/en/function.random-bytes.php">random_bytes</a></p>
</dd>
</dl>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Whiteboard</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;Copyright &copy; 2020 <a href="https://auroraextensions.com" target="_blank">Aurora Extensions</a>.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/topic/Token.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>